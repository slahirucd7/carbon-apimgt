# trigger: none

# # pr:
# # - master
# # - 8.x
# # - 10.x
    
# pool:
#     vmImage: ubuntu-20.04

# jobs:
#   - job: main
#     steps:
#       - script: |
#           echo "BUILD_SOURCEVERSION do not support anymore to get commit id."
#           echo "BUILD_SOURCEVERSION = $SYSTEM_PULLREQUEST_SOURCECOMMITID"
#           echo $(System.PullRequest.SourceCommitId)  #working commit id getting method
#           echo $(SYSTEM.PULLREQUEST.SOURCECOMMITID)  #working commit id getting method
#           echo $SYSTEM_PULLREQUEST_SOURCECOMMITID    #working commit id getting method
#           echo "##vso[task.setvariable variable=PRNumber;isOutput=true]$(curl https://api.github.com/search/issues?q=sha:$SYSTEM_PULLREQUEST_SOURCECOMMITID | grep number | grep -o '[0-9]*')"
#         displayName: Set output variables
#         name: myEnv
#   - job: variables_handler
#     dependsOn: main
#     variables:
#       PRNumber: $[ dependencies.main.outputs['myEnv.PRNumber'] ]
#     steps:
#       - task: CmdLine@2
#         displayName: Create artifact from variables
#         inputs:
#           script: |
#             echo $PRNumber
#             echo $(PRNumber)
#             echo "##vso[task.setvariable variable=PRNumber;]$(PRNumber)" >  $(Build.ArtifactStagingDirectory)/pipeline.env
#       # - task: PublishBuildArtifacts@1
#       #   displayName: publish variables
#       #   inputs:
#       #     PathtoPublish: '$(Build.ArtifactStagingDirectory)'
#       #     ArtifactName: 'variables'
#       #     publishLocation: 'Container'
#       - task: PublishPipelineArtifact@1
#         displayName: publish variables
#         inputs:
#           targetPath: '$(Build.ArtifactStagingDirectory)'
#           artifact: 'variables'
#           publishLocation: 'pipeline'
      
      
